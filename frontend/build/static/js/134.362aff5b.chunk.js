"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[134],{3134:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var n=o(4165),s=o(5861),i=o(1413),r=o(9439),l=o(2791),d={slider:"photoSlider_slider__P4ahD",slider__content:"photoSlider_slider__content__Ef-Mo",slider__close_ss:"photoSlider_slider__close_ss__sRL-Z",slider__comments_show:"photoSlider_slider__comments_show__Oe6k6",slider__photo:"photoSlider_slider__photo__tCpO0",slider__photo_btn:"photoSlider_slider__photo_btn__BNb5w",slider__photo_btn_left:"photoSlider_slider__photo_btn_left__iV1Jp",slider__photo_btn_right:"photoSlider_slider__photo_btn_right__BRh5Q",slider__photo_image:"photoSlider_slider__photo_image__k3cQO",slider__info:"photoSlider_slider__info__jksbM",slider__info_ss_show:"photoSlider_slider__info_ss_show__taNWR",slider__info_top:"photoSlider_slider__info_top__lO8tl",slider__info_user:"photoSlider_slider__info_user__5-cIc",slider__info_user_image:"photoSlider_slider__info_user_image__mTB0m",slider__info_user_name:"photoSlider_slider__info_user_name__UXBFU",slider__info_date:"photoSlider_slider__info_date__VdN4t",slider__close:"photoSlider_slider__close__7FhlD",slider__close_comments:"photoSlider_slider__close_comments__-NbZK",slider__desc:"photoSlider_slider__desc__MafNW",slider__desc_text:"photoSlider_slider__desc_text__e4E3n",slider__desc_edit:"photoSlider_slider__desc_edit__6pSBX",slider__likes_and_comments:"photoSlider_slider__likes_and_comments__Ef+xK"},c=o(1087),_=o(6220),u=o(1334),a=o(6196),p=o(5155),h=o(5582),m=o(2943),f={description:{elementType:m.b.INPUT_TEXT,inputDisplay:m.c.INPUT_BLOCK,attributes:{id:"description",name:"description",placeholder:"Describe photo"},label:{labelShow:!0,labelFor:"description",labelText:"Description"},validation:{required:!0},focused:!1,touched:!1,value:"",valid:!1,errorMsg:"Some text is required before submiting"}},b="editPhotoDescriptionInput_input__2pJyj",x="editPhotoDescriptionInput_input__field__xlRw8",I="editPhotoDescriptionInput_input__btns__Lzk6f",k="editPhotoDescriptionInput_input__btn__4SM51",C="editPhotoDescriptionInput_input__btn_submit__qmDYd",v="editPhotoDescriptionInput_input__btn_cancel__spNR8",Z=o(8668),w=o(8459),j=o(184),g=function(e){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Z.Z,{show:e.show,bcgColor:"dark",onClose:e.onClose,hiperZIndex:!0}),(0,j.jsxs)("form",{className:b,onSubmit:e.onSubmit,children:[(0,j.jsx)("div",{className:x,children:(0,j.jsx)(w.Z,(0,i.Z)((0,i.Z)({},e.input.description),{},{inputGroup:"description",onInputFocus:e.onEditPhotoDescInputFocused,onInputUnfocus:e.onEditPhotoDescInputUnfocused,onInputChange:e.onEditPhotoDescInputChanged}))}),!e.loading&&(0,j.jsxs)("div",{className:I,children:[(0,j.jsx)("button",{type:"submit",className:"".concat(k," ").concat(C),disabled:!e.submitDisabled,children:"edit"}),(0,j.jsx)("button",{type:"button",className:"".concat(k," ").concat(v),onClick:e.onClose,children:"cancel"})]})]})]})},P=(0,l.memo)(g),S=function(e){var t=e.onCommentOnPhoto,o=e.onDeletePhotoComment,m=e.onLikePhoto,b=e.onUnlikePhoto,x=e.onLikePhotoComment,I=e.onUnlikePhotoComment,k=e.onChangePhotoDescription,C=(0,l.useState)(!1),v=(0,r.Z)(C,2),w=v[0],g=v[1],S=(0,l.useState)(null),N=(0,r.Z)(S,2),y=N[0],D=N[1],T=(0,l.useState)(!1),U=(0,r.Z)(T,2),L=U[0],E=U[1],M=(0,l.useState)({show:!1,input:(0,i.Z)({},f)}),O=(0,r.Z)(M,2),B=O[0],F=O[1],z=(0,l.useState)({albumId:null,photoId:null,commentId:null}),A=(0,r.Z)(z,2),R=A[0],V=A[1],W=(0,l.useCallback)((function(){E(!1)}),[]),K=function(){V({albumId:null,photoId:null,commentId:null})},q=(0,l.useCallback)(function(){var o=(0,s.Z)((0,n.Z)().mark((function o(s,i,r,l){return(0,n.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t(e.albumId,s,i,r,l);case 2:case"end":return o.stop()}}),o)})));return function(e,t,n,s){return o.apply(this,arguments)}}(),[t,e.albumId]),H=(0,l.useCallback)((function(t,o){e.albumId?V({albumId:e.albumId,photoId:t,commentId:o}):D("Album not found. Try refreshing the page")}),[e.albumId]),X=(0,l.useCallback)((0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(R.albumId,R.photoId,R.commentId);case 2:K();case 3:case"end":return e.stop()}}),e)}))),[o,R]),J=(0,l.useCallback)(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e.albumId,o);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[m,e.albumId]),Q=(0,l.useCallback)(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e.albumId,o);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[b,e.albumId]),G=(0,l.useCallback)(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o,s){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e.albumId,o,s);case 2:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),[x,e.albumId]),Y=(0,l.useCallback)(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o,s){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e.albumId,o,s);case 2:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),[I,e.albumId]),$=(0,l.useCallback)((function(){F({show:!1,input:(0,i.Z)({},f)})}),[]),ee=(0,l.useCallback)((function(e){F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{input:(0,i.Z)((0,i.Z)({},e.input),{},{description:(0,i.Z)((0,i.Z)({},e.input.description),{},{focused:!0,touched:!0})})})}))}),[]),te=(0,l.useCallback)((function(e){F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{input:(0,i.Z)((0,i.Z)({},e.input),{},{description:(0,i.Z)((0,i.Z)({},e.input.description),{},{focused:!1})})})}))}),[]),oe=(0,l.useCallback)((function(e,t){var o=e.target;F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{input:(0,i.Z)((0,i.Z)({},e.input),{},{description:(0,i.Z)((0,i.Z)({},e.input.description),{},{value:o.value,valid:o.value.trim().length>0})})})}))}),[]),ne=(0,l.useCallback)(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o){var s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),g(!0),0!==(s=B.input.description.value).trim().length){t.next=7;break}return D("Can't send empty description"),g(!1),t.abrupt("return");case 7:return t.next=9,k(e.albumId,e.photos[e.displayedPhotoIndex]._id,s);case 9:$(),g(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[B.input.description.value,e.displayedPhotoIndex,e.albumId,k,e.photos,$]),se=(0,l.useCallback)((function(){D(null)}),[]);return(0,j.jsxs)(j.Fragment,{children:[null!==y&&(0,j.jsx)(p.default,{show:null!==y,isErrorModal:!0,title:"Error occured",text:y,onClose:se,children:(0,j.jsx)(h.Z,{btnType:"button",btnCustomType:"btn__ok",btnText:"OK",onClick:se})}),null!==R.albumId&&null!==R.photoId&&null!==R.commentId&&(0,j.jsxs)(p.default,{show:null!==R.albumId&&null!==R.photoId&&null!==R.commentId,isErrorModal:!1,title:"Prepairing to delete photo comment",text:"Are you sure you want to delete this comment?",onClose:K,children:[(0,j.jsx)(h.Z,{btnType:"button",btnCustomType:"btn__cancel",btnText:"cancel",onClick:K}),(0,j.jsx)(h.Z,{btnType:"button",btnCustomType:"btn__confirm",btnText:"delete",onClick:X})]}),(0,j.jsxs)("div",{className:d.slider,children:[L&&(0,j.jsx)(Z.Z,{show:L,bcgColor:"dark",onClose:W,isSmallScreenSliderBackdrop:!0}),(0,j.jsxs)("div",{className:d.slider__content,children:[(0,j.jsxs)("div",{className:d.slider__photo,children:[(0,j.jsx)("div",{className:d.slider__close_ss,onClick:e.onClosePhotoSlider,children:"close"}),(0,j.jsx)("div",{className:d.slider__comments_show,onClick:function(){E(!0)},children:"show comments"}),(0,j.jsxs)("div",{className:d.slider__photo_btns,children:[e.displayedPhotoIndex>0&&(0,j.jsx)("button",{type:"button",className:"".concat(d.slider__photo_btn," ").concat(d.slider__photo_btn_left),onClick:e.prevPhoto,children:(0,j.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"})})}),e.displayedPhotoIndex<e.photos.length-1&&(0,j.jsx)("button",{type:"button",className:"".concat(d.slider__photo_btn," ").concat(d.slider__photo_btn_right),onClick:e.nextPhoto,children:(0,j.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"})})})]}),(0,j.jsx)("div",{className:d.slider__photo_image,children:(0,j.jsx)("img",{src:e.photos[e.displayedPhotoIndex].photo.secure_url,alt:"userImage"})})]}),(0,j.jsxs)("div",{className:"".concat(d.slider__info," ").concat(L?d.slider__info_ss_show:""),children:[(0,j.jsxs)("div",{className:d.slider__info_top,children:[(0,j.jsxs)("div",{className:d.slider__info_user,children:[(0,j.jsx)("div",{className:d.slider__info_user_image,children:(0,j.jsx)("img",{src:e.user.profilePhotoUrl||_,alt:"user"})}),(0,j.jsxs)("div",{className:d.slider__info_user_data,children:[(0,j.jsx)(c.rU,{to:"/user/".concat(e.user._id),className:d.slider__info_user_name,children:e.user.fullName}),(0,j.jsx)("p",{className:d.slider__info_date,children:e.photos[e.displayedPhotoIndex].createdAt?(0,a.o)(e.photos[e.displayedPhotoIndex].createdAt):""})]})]}),(0,j.jsx)("div",{className:d.slider__close,onClick:e.onClosePhotoSlider,children:"close slider"}),(0,j.jsx)("div",{className:d.slider__close_comments,onClick:W,children:"close comments"})]}),(0,j.jsxs)("div",{className:d.slider__desc,children:[e.isAuthUser&&e.onChangePhotoDescription&&B.show&&(0,j.jsx)(P,{show:B.show,input:B.input,loading:w,onClose:$,onEditPhotoDescInputFocused:ee,onEditPhotoDescInputUnfocused:te,onEditPhotoDescInputChanged:oe,submitDisabled:B.input.description.valid,onSubmit:ne}),!B.show&&(0,j.jsx)("p",{className:d.slider__desc_text,children:e.photos[e.displayedPhotoIndex].description||"No description"}),e.isAuthUser&&!B.show&&(0,j.jsx)("button",{type:"button",className:d.slider__desc_edit,onClick:function(){var t=e.photos[e.displayedPhotoIndex].description||"";F((function(e){return{show:!0,input:(0,i.Z)((0,i.Z)({},e.input),{},{description:(0,i.Z)((0,i.Z)({},e.input.description),{},{value:t,touched:!!t,valid:!!t})})}}))},children:(0,j.jsxs)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{d:"m7 17.013 4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),(0,j.jsx)("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]})})]}),(0,j.jsx)("div",{className:d.slider__likes_and_comments,children:(0,j.jsx)(u.Z,{currentUserId:e.user._id,itemId:e.photos[e.displayedPhotoIndex]._id,likes:e.photos[e.displayedPhotoIndex].likes,comments:e.photos[e.displayedPhotoIndex].comments,onSubmitComment:q,onPrepareDeleteComment:H,onLikeItem:J,onUnlikeItem:Q,onLikeComment:G,onUnlikeComment:Y,hideLikingOption:e.hideLikingOption||!1,hideCommentingOption:e.hideCommentingOption||!1})})]})]})]})]})}}}]);
//# sourceMappingURL=134.362aff5b.chunk.js.map