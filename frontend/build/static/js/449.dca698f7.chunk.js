"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[449],{2942:function(e,t,n){n.d(t,{Z:function(){return s}});var a={container:"pageContainer_container__JU78m",container__flex:"pageContainer_container__flex__mQNaW",container__data:"pageContainer_container__data__70LWJ",big:"pageContainer_big__iMyUq"},r={title:"pageTitle_title__Di7Rk",title__text:"pageTitle_title__text__jkIUE",title__underline:"pageTitle_title__underline__A2NOq"},i=n(184),l=function(e){return(0,i.jsxs)("div",{className:"".concat(r.title," ").concat(r[e.textAlign]),children:[(0,i.jsx)("h1",{className:r.title__text,children:e.titleText}),(0,i.jsx)("div",{className:r.title__underline})]})},s=function(e){return(0,i.jsxs)("main",{className:"".concat(a.container," ").concat(a[e.display]," ").concat(a[e.width]),children:[e.hasPageTitle&&e.titleText&&e.titleTextAlign&&(0,i.jsx)(l,{titleText:e.titleText,textAlign:e.titleTextAlign}),(0,i.jsx)("section",{className:a.container__data,children:e.children})]})}},7449:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var a=n(4165),r=n(5861),i=n(9439),l=n(2791),s=n(1243),c=n(8006),o=s.Z.create({baseURL:"".concat(c.Z,"/activity")}),_=n(1573),u=n(2942),d=n(4079),g="singleLog_log__TqQn4",x="singleLog_log__text__fKTmw",p="singleLog_log__date__fEbVo",f="singleLog_log__btns__f7CIN",h="singleLog_log__btns_left__us45A",m="singleLog_log__btn__6UtZv",b="singleLog_log__delete__mHPLx",T=n(1087),v=n(2186),j=n(184),k=function(e){return(0,j.jsxs)("div",{className:g,children:[(0,j.jsx)("p",{className:x,children:e.logText}),(0,j.jsxs)("p",{className:p,children:["created: ",(0,v.X)(e.createdAt)]}),(0,j.jsxs)("div",{className:f,children:[(0,j.jsxs)("div",{className:h,children:[e.targetUser&&e.targetUser._id!==e.authUserId&&(0,j.jsxs)(T.rU,{className:m,to:"/user/".concat(e.targetUser._id),children:["view ",e.targetUser.fullName]}),e.postId&&(0,j.jsx)(T.rU,{className:m,to:"/post/".concat(e.postId),children:"view post"})]}),(0,j.jsx)("button",{className:b,onClick:function(){return e.onPrepateDeleteLog(e.id)},children:"delete log"})]})]})},N=n(5155),Z=n(5582),A=function(){var e=(0,_.i)((function(e){return e.auth})).authUser,t=(0,l.useState)(!1),n=(0,i.Z)(t,2),s=n[0],c=n[1],g=(0,l.useState)(null),x=(0,i.Z)(g,2),p=(x[0],x[1]),f=(0,l.useState)([]),h=(0,i.Z)(f,2),m=h[0],b=h[1],T=(0,l.useState)(null),v=(0,i.Z)(T,2),A=v[0],C=v[1],U=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=localStorage.getItem("socNetAppToken"),e.prev=2,e.next=5,o.get("/",{headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,r=n.data,console.log(r),b(r.acitvityLogs),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),p(e.t0.reponse.data.message);case 14:c(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){U()}),[]);var y=(0,l.useCallback)((function(e){C(e)}),[]),w=(0,l.useCallback)((function(){C(null)}),[]),L=(0,l.useCallback)((0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=3;break}return p("Can't find log id. Try again"),e.abrupt("return");case 3:return c(!0),t=localStorage.getItem("socNetAppToken"),e.prev=5,e.next=8,o.delete("/".concat(A),{headers:{Authorization:"Bearer ".concat(t)}});case 8:b((function(e){return e.filter((function(e){return e._id!==A}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),p(e.t0.response.data.message);case 14:C(null),c(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])}))),[A]);return(0,j.jsxs)(j.Fragment,{children:[null!==A&&!s&&(0,j.jsxs)(N.default,{isErrorModal:!1,show:null!==A&&!s,title:"Preparing to delete log",text:"Are you sure you want to delete this log?",onClose:w,children:[(0,j.jsx)(Z.Z,{btnType:"button",btnCustomType:"btn__cancel",btnText:"cancel",onClick:w}),(0,j.jsx)(Z.Z,{btnType:"button",btnCustomType:"btn__confirm",btnText:"delete",onClick:L})]}),e&&(0,j.jsx)(u.Z,{display:"container__block",hasPageTitle:!0,loading:!1,width:"big",titleText:"Activity Logs",titleTextAlign:"title__left",children:s?(0,j.jsx)(d.Z,{}):s||0!==m.length?m.map((function(t){return(0,j.jsx)(k,{id:t._id,logText:t.logText,authUserId:e._id,targetUser:t.targetUser,createdAt:t.createdAt,postId:t.postId,photoId:t.photoId,onPrepateDeleteLog:y},t._id)})):(0,j.jsx)("p",{style:{width:"100%",textAlign:"center",fontSize:"1.5rem"},children:"No logs"})})]})}}}]);
//# sourceMappingURL=449.dca698f7.chunk.js.map