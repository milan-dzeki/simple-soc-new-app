"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[613,153],{7153:function(e,n,s){s.r(n),s.d(n,{default:function(){return h}});var t=s(1413),r=s(4164),a={modal:"sendMessageModal_modal__xGxiS",modalAppear:"sendMessageModal_modalAppear__oaaon",modal__body:"sendMessageModal_modal__body__RlMxA",modal__btns:"sendMessageModal_modal__btns__lzhvw"},o=s(8668),l=s(8459),i=s(1986),u=s(5582),c=s(4818),d=s(4079),_=s(184),h=function(e){return r.createPortal((0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.Z,{show:e.show,bcgColor:"dark",onClose:e.onClose}),(0,_.jsx)("div",{className:a.modal,children:(0,_.jsxs)("div",{className:a.modal__content,children:[(0,_.jsx)(c.Z,{text:"Send Message to ".concat(e.friendToSentMessageName),onClose:e.onClose}),e.loading?(0,_.jsx)(d.Z,{}):(0,_.jsxs)("form",{className:a.modal__body,onSubmit:e.onSendMessageToUser,children:[(0,_.jsx)(l.Z,(0,t.Z)((0,t.Z)({},e.messageTextInput.messageText),{},{inputGroup:"messageText",onInputFocus:e.onMessageTextFocused,onInputUnfocus:e.onMessageTextUnfocused,onInputChange:e.onMessageTextChanged})),(0,_.jsx)(i.Z,{photoFile:e.photoFile,photoPreview:e.photoPreview,inputText:"Upload Message Photo",onPrepareProfilePhoto:e.onUploadPhoto,onRemoveProfilePhoto:e.onRemovePhoto}),(0,_.jsxs)("div",{className:a.modal__btns,children:[(0,_.jsx)(u.Z,{btnType:"button",btnCustomType:"btn__cancel",btnText:"cancel",onClick:e.onClose}),(0,_.jsx)(u.Z,{btnType:"submit",btnCustomType:"btn__confirm",btnText:"send",disabled:0===e.messageTextInput.messageText.value.trim().length&&!e.photoFile})]})]})]})})]}),document.getElementById("modal"))}},2942:function(e,n,s){s.d(n,{Z:function(){return l}});var t={container:"pageContainer_container__JU78m",container__flex:"pageContainer_container__flex__mQNaW",container__data:"pageContainer_container__data__70LWJ",big:"pageContainer_big__iMyUq"},r={title:"pageTitle_title__Di7Rk",title__text:"pageTitle_title__text__jkIUE",title__underline:"pageTitle_title__underline__A2NOq"},a=s(184),o=function(e){return(0,a.jsxs)("div",{className:"".concat(r.title," ").concat(r[e.textAlign]),children:[(0,a.jsx)("h1",{className:r.title__text,children:e.titleText}),(0,a.jsx)("div",{className:r.title__underline})]})},l=function(e){return(0,a.jsxs)("main",{className:"".concat(t.container," ").concat(t[e.display]," ").concat(t[e.width]),children:[e.hasPageTitle&&e.titleText&&e.titleTextAlign&&(0,a.jsx)(o,{titleText:e.titleText,textAlign:e.titleTextAlign}),(0,a.jsx)("section",{className:t.container__data,children:e.children})]})}},5045:function(e,n,s){s.d(n,{S:function(){return o}});var t=s(9439),r=s(2791),a={modalShow:!1,clickedFriendName:null,mutualFriends:[]},o=function(){var e=(0,r.useState)(a),n=(0,t.Z)(e,2),s=n[0],o=n[1];return{mutualFriendsInfo:s,onOpenFriendsModal:(0,r.useCallback)((function(e,n,s){var t=s.filter((function(n){return e.includes(n.user._id)}));o({modalShow:!0,clickedFriendName:n,mutualFriends:t.map((function(e){return{_id:e.user._id,fullName:e.user.fullName,profilePhotoUrl:e.user.profilePhotoUrl}}))})}),[]),onCloseFriendsModal:(0,r.useCallback)((function(){o(a)}),[])}}},5613:function(e,n,s){s.r(n),s.d(n,{default:function(){return O}});var t=s(3433),r=s(4942),a=s(4165),o=s(1413),l=s(5861),i=s(9439),u=s(2791),c="searchPage_no_results__gOu80",d=s(4466),_=s(1573),h=s(5045),m=s(419),g=s(2942),f="searchField_search__9GG25",p="searchField_search__left__kHY3t",x="searchField_search__results__XD2zJ",b="searchField_results__j6Jh0",v="searchField_search__right__vQu8U",j="searchField_search__right_clear__g-fFt",M="searchField_search__submit__7-+ux",w=s(184),F=function(e){return(0,w.jsxs)("div",{className:f,children:[(0,w.jsx)("div",{className:p,children:e.resultsFor.trim().length>0&&(0,w.jsxs)("p",{className:x,children:[(0,w.jsx)("span",{children:"Results for: "}),(0,w.jsxs)("span",{className:b,children:['"',e.resultsFor,'"']})]})}),(0,w.jsxs)("form",{className:v,onSubmit:e.onSearch,children:[(0,w.jsx)("button",{type:"submit",className:M,disabled:0===e.searchText.trim().length,children:(0,w.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"})})}),(0,w.jsx)("input",{type:"text",placeholder:"Search...",value:e.searchText,onChange:e.onSearchChanged}),e.searchText.trim().length>0&&(0,w.jsx)("button",{type:"button",className:j,children:(0,w.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})})})]})]})},C=s(1725),S="searchButtons_btns__IGu-Z",N="searchButtons_btns__btn__a8O15",T="searchButtons_btns__btn_active__2RmHK",Z=function(e){return(0,w.jsxs)("div",{className:S,children:[(0,w.jsx)("button",{type:"button",className:"".concat(N," ").concat("newest"===e.activeBtn?T:""),onClick:function(){return e.onGetUsersByUrl("/lastJoined","newest")},children:"10 newest people"}),(0,w.jsx)("button",{type:"button",className:"".concat(N," ").concat("know"===e.activeBtn?T:""),onClick:function(){return e.onGetUsersByUrl("/peopleYouMayKnow","know")},children:"people you may know"}),e.searched&&(0,w.jsx)("button",{type:"button",className:"".concat(N," ").concat("search"===e.activeBtn?T:""),onClick:e.onSelectSearchResults,children:"search results"})]})},k={user:"searchFriend_user__Dt4i3",user__top:"searchFriend_user__top__vuYE6",user__photo_img:"searchFriend_user__photo_img__ImuYf",user__info:"searchFriend_user__info__lTX86",user__friends:"searchFriend_user__friends__zlL6T",user__mutuals:"searchFriend_user__mutuals__dIJNR",user__name:"searchFriend_user__name__Udwd7",user__btns:"searchFriend_user__btns__VnHrB",user__btn:"searchFriend_user__btn__THU-2",user__btn_view:"searchFriend_user__btn_view__LUb05",user__btn_add:"searchFriend_user__btn_add__I6+S7",user__btn_msg:"searchFriend_user__btn_msg__VH4Ic"},y=s(6220),U=s(1087),I=function(e){return(0,w.jsxs)("div",{className:k.user,children:[(0,w.jsxs)("div",{className:k.user__top,children:[(0,w.jsx)("div",{className:k.user__photo,children:(0,w.jsx)("div",{className:k.user__photo_img,children:(0,w.jsx)("img",{src:e.user.user.profilePhotoUrl||y,alt:"user"})})}),(0,w.jsxs)("div",{className:k.user__info,children:[(0,w.jsx)("p",{className:k.user__name,children:e.user.user.fullName}),"friends"===e.user.friendStatus&&(0,w.jsx)("p",{className:k.user__friends,children:"your friend"}),e.user.mutualFriends.length>0&&(0,w.jsxs)("p",{className:k.user__mutuals,onClick:function(){return e.openFriendsModal(e.user.mutualFriends,e.user.user.fullName)},children:[e.user.mutualFriends.length," mutual friends"]})]})]}),(0,w.jsxs)("div",{className:k.user__btns,children:[(0,w.jsx)(U.rU,{to:"/user/".concat(e.user.user._id),className:"".concat(k.user__btn," ").concat(k.user__btn_view),children:"view"}),("none"===e.user.friendStatus&&"everyone"===e.user.settings.whoCanAddMe||"none"===e.user.friendStatus&&"friendsOfFriends"===e.user.settings.whoCanAddMe&&e.user.mutualFriends.length>0)&&(0,w.jsx)("button",{type:"button",className:"".concat(k.user__btn," ").concat(k.user__btn_add),disabled:e.friendsLoading,onClick:function(){return e.onSendFriendRequest(e.user.user._id)},children:"add friend"}),("everyone"===e.user.settings.whoCanMessageMe||"friends"===e.user.settings.whoCanMessageMe&&"friends"===e.user.friendStatus||"friendsOfFriends"===e.user.settings.whoCanMessageMe&&e.user.mutualFriends.length>0)&&(0,w.jsx)("button",{type:"button",className:"".concat(k.user__btn," ").concat(k.user__btn_msg),onClick:function(){return e.onOpenSendMessageModal(e.user.user._id,e.user.user.fullName)},children:"send message"})]})]})},P=(0,u.memo)(I),B=s(4079),A=s(6121),R=s(7153),L=s(1802),O=function(){var e=(0,d.I0)(),n=(0,_.i)((function(e){return e.friends})),s=n.friendsLoading,f=(n.friendsErrorMsg,n.friends),p=n.requestStatus,x=(0,u.useState)(""),b=(0,i.Z)(x,2),v=b[0],j=b[1],M=(0,u.useState)(""),S=(0,i.Z)(M,2),N=S[0],T=S[1],k=(0,u.useState)(!1),y=(0,i.Z)(k,2),U=y[0],I=y[1],O=(0,u.useState)(null),q=(0,i.Z)(O,2),z=(q[0],q[1]),E=(0,u.useState)({search:[],know:[],newest:[]}),G=(0,i.Z)(E,2),J=G[0],H=G[1],D=(0,u.useState)("newest"),W=(0,i.Z)(D,2),Y=W[0],Q=W[1],K=(0,u.useState)(null),V=(0,i.Z)(K,2),X=V[0],$=V[1],ee=(0,h.S)(),ne=ee.mutualFriendsInfo,se=ee.onOpenFriendsModal,te=ee.onCloseFriendsModal,re=(0,m.$)(),ae=re.sendMessageLoading,oe=(re.sendMessageErrorMsg,re.messageInfo),le=(re.onClearSendMessageError,re.onOpenSendMessageModal),ie=re.onCloseSendMessageModal,ue=re.onSendMessageInputTextFocused,ce=re.onSendMessageInputTextUnfocused,de=re.onSendMessageInputTextChanged,_e=re.onSendMessageUploadPhoto,he=re.onDeleteSendMessagePhoto,me=re.onSendMessage,ge=(0,u.useCallback)(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(n){var s,t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),I(!0),s=localStorage.getItem("socNetAppToken"),e.prev=3,e.next=6,C.Z.get("/searchByName/".concat(v),{headers:{Authorization:"Bearer ".concat(s)}});case 6:t=e.sent,r=t.data,H((function(e){return(0,o.Z)((0,o.Z)({},e),{},{search:r.users})})),console.log(r),T(v),j(""),Q("search"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),z(e.t0.response.data.message);case 19:I(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}(),[v]),fe=((0,u.useCallback)((0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),[]),function(){var e=(0,l.Z)((0,a.Z)().mark((function e(n,s){var t,l,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),t=localStorage.getItem("socNetAppToken"),e.prev=2,e.next=5,C.Z.get(n,{headers:{Authorization:"Bearer ".concat(t)}});case 5:l=e.sent,i=l.data,console.log(i),H((function(e){var n;return(0,o.Z)((0,o.Z)({},e),{},(n={},(0,r.Z)(n,s,i.users),(0,r.Z)(n,"search",[]),n))})),Q(s),T(""),j(""),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),z(e.t0.response.data.message);case 18:I(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(n,s){return e.apply(this,arguments)}}());(0,u.useEffect)((function(){fe("/lastJoined","newest")}),[]),(0,u.useEffect)((function(){"requested"===p&&null!==X&&(H((function(e){var n=e[Y].findIndex((function(e){return e.user._id===X}));if(-1===n)return e;var s=(0,t.Z)(e[Y]),a=(0,o.Z)({},s[n]);return a.friendStatus="requestSent",s[n]=a,(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},Y,s))})),$(null),e((0,L.qv)()))}),[Y,e,p,X]);var pe=(0,u.useCallback)((function(){Q("search")}),[]),xe=(0,u.useCallback)((function(e,n){var s=f.filter((function(n){return e.includes(n.user._id)}));se(e,n,s)}),[f,se]),be=(0,u.useCallback)((function(n){e((0,L.QT)(n)),$(n)}),[e]);return U||ae?(0,w.jsx)(B.Z,{}):(0,w.jsxs)(w.Fragment,{children:[ne.modalShow&&ne.clickedFriendName&&(0,w.jsx)(A.Z,{show:ne.modalShow,title:"Mutual Friends with ".concat(ne.clickedFriendName),friends:ne.mutualFriends,onClose:te}),null!==oe.userId&&null!==oe.userName&&(0,w.jsx)(R.default,{show:null!==oe.userId&&null!==oe.userName,loading:ae,friendToSentMessageName:oe.userName,onClose:ie,messageTextInput:oe.messageTextInput,onMessageTextFocused:ue,onMessageTextUnfocused:ce,onMessageTextChanged:de,photoFile:oe.messagePhoto,photoPreview:oe.messagePhotoPreview,onUploadPhoto:_e,onRemovePhoto:he,onSendMessageToUser:me}),(0,w.jsxs)(g.Z,{display:"container__block",hasPageTitle:!0,titleTextAlign:"title__left",titleText:"Search people",width:"big",loading:!1,children:[(0,w.jsx)(F,{searchText:v,resultsFor:N,onSearchChanged:function(e){var n=e.target;j(n.value)},onClearSearch:function(){j("")},onSearch:ge}),(0,w.jsx)(Z,{activeBtn:Y,searched:N.trim().length>0,onGetUsersByUrl:fe,onSelectSearchResults:pe}),(0,w.jsx)(g.Z,{display:"container__flex",hasPageTitle:!1,loading:!1,width:"big",children:0===J[Y].length&&0===v.trim().length?(0,w.jsx)("p",{className:c,children:"No results found"}):J[Y].map((function(e){return(0,w.jsx)(P,{user:e,friendsLoading:s,openFriendsModal:xe,onOpenSendMessageModal:le,onSendFriendRequest:be},e.user._id)}))})]})]})}}}]);
//# sourceMappingURL=613.de124b6e.chunk.js.map